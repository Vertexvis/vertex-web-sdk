<!DOCTYPE html>
<html dir="ltr" lang="en">
  <head>
    <meta charset="utf-8" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=5.0"
    />
    <title>Stencil Component Starter</title>

    <script type="module" src="/build/viewer.esm.js"></script>
    <script nomodule src="/build/viewer.js"></script>
    <link rel="stylesheet" href="/build/viewer.css" />

    <style>
      html,
      body {
        width: 100%;
        height: 100%;
        padding: 0;
        margin: 0;
      }

      .viewer {
        width: 1000px;
        height: 1000px;
        display: inline-block;
      }
    </style>

    <script type="module">
      window.addEventListener('DOMContentLoaded', () => {
        main();
      });

      async function main() {
        const viewer1 = document.querySelector('#viewer1');
        const viewer2 = document.querySelector('#viewer2');

        viewer1.config = {
          flags: {
            bufferFrameDelivery: true,
            bufferVariationThreshold: 0.1,
            bufferHistoryMaxSize: 15,
            bufferFrameTimeout: '500ms',
            bufferFrameTimeoutThreshold: 0.25,
          },
        };

        // viewer1.addEventListener('frameReceived', async event => {
        //   const camera = event.detail.sceneAttributes.camera;
        //   const scene = await viewer2.scene();
        //   scene
        //     .camera()
        //     .update(camera)
        //     .render();
        // });
      }
    </script>
  </head>

  <body>
    <vertex-viewer
      id="viewer1"
      class="viewer"
      config-env="platdev"
      src="urn:vertexvis:stream-key:GYHCyFkAxEoPcNNDaK3YTnJL2pXNMysFnxep"
    ></vertex-viewer>
    <vertex-viewer
      id="viewer2"
      class="viewer"
      config-env="platdev"
      src="urn:vertexvis:stream-key:GYHCyFkAxEoPcNNDaK3YTnJL2pXNMysFnxep"
    ></vertex-viewer>
  </body>
</html>
